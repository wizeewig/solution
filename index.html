<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pantry App</title>
</head>
<body>
    <h1>Pantry App</h1>
    
    <!-- Create (POST) Operation -->
    <h2>Add Item to Pantry</h2>
    <input type="text" id="itemName" placeholder="Item Name">
    <button onclick="addItem()">Add Item</button>

    <!-- Read (GET) Operation -->
    <h2>Pantry Items</h2>
    <ul id="pantryList"></ul>

    <!-- Update (PUT) Operation -->
    <h2>Edit Item</h2>
    <input type="text" id="editItemId" placeholder="Item ID">
    <input type="text" id="editedItemName" placeholder="Edited Item Name">
    <button onclick="editItem()">Edit Item</button>

    <!-- Delete (DELETE) Operation -->
    <h2>Delete Item</h2>
    <input type="text" id="deleteItemId" placeholder="Item ID">
    <button onclick="deleteItem()">Delete Item</button>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        // Function to display pantry items
        function displayPantryItems() {
            $.get('/api/pantry', function(data) {
                const pantryList = $('#pantryList');
                pantryList.empty();
                data.forEach(function(item) {
                    pantryList.append(`<li>${item.name}</li>`);
                });
            });
        }

        // Function to add an item to the pantry
        function addItem() {
            const itemName = $('#itemName').val();
            $.post('https://getpantry.cloud/apiv1/pantry/465b8319-e70d-40c4-b75a-cbb28bbd871d/basket/NewBasket', { name: itemName }, function() {
                displayPantryItems();
                $('#itemName').val('');
            });
        }

        // Function to edit an item in the pantry
        function editItem() {
            const itemId = $('#editItemId').val();
            const editedItemName = $('#editedItemName').val();
            $.ajax({
                url: `/api/pantry/${itemId}`,
                type: 'PUT',
                data: { name: editedItemName },
                success: function() {
                    displayPantryItems();
                    $('#editItemId').val('');
                    $('#editedItemName').val('');
                },
                error: function(response) {
                    alert(response.responseText);
                }
            });
        }

        // Function to delete an item from the pantry
        function deleteItem() {
            const itemId = $('#deleteItemId').val();
            $.ajax({
                url: `/api/pantry/${itemId}`,
                type: 'DELETE',
                success: function(data) {
                    displayPantryItems();
                    $('#deleteItemId').val('');
                },
                error: function(response) {
                    alert(response.responseText);
                }
            });
        }

        // Initial display of pantry items
        displayPantryItems();
    </script>
</body>
</html>
